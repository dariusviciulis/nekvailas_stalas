{% extends "layout.twig" %}

{% block content %}
    <div id="status"></div>
{% endblock %}

{% block javascript %}
    <script>
        var getStatus = function() {
            $.getJSON( "http://{{ app.request.host }}/kickertable/api/v1/status", function(data) {
                if (data.table == 'busy') {
                    $("#status").html( "busy<br />" + JSON.stringify(data.data) );
                } else if(data.table == 'free') {
                    $("#status").html( "free" )
                }
            })
            .fail(function() {
                $("#status").html("offline");
            });
        }
        var tid = setInterval(getStatus, 3000);
    </script>
{% endblock %}